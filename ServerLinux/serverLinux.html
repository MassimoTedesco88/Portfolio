<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>HomeServerLinux</title>
		<link rel="stylesheet" href="../CSS/stylesPortfolio.css">
	</head>
<body>
	<header>
		<div class="logo">PC & Network - My Portfolio</div>
		<nav class="nav">
			<a href="#">myGitHub</a>
			<a href="https://de.linkedin.com/in/massimo-sedda-173416135?trk=people-guest_people_search-card">myLinkedIn</a>
		</nav>
	</header>
	<section class="section intro">
		<h1>Linux Server Setup on Raspberry Pi 5</h1>		
		<h3>Project Goal</h3>						
					<p>I wanted my Python program for financial analysis to run automatically once a day, without needing to turn on my PC.</p>
					<p>After evaluating several options, I decided to build a small physical server by purchasing a Raspberry Pi 5 kit with 8GB of RAM, complete with a case and cooling system. I also added a 64GB SanDisk A2 microSD card—sufficient for the automatic saving of HTML reports generated by the program, as well as for future projects I have in mind.</p>			
							
					<a href="..\indexPortfolio.html">**Torna Indietro**</a>
		
	</section>	
	<section class="section projects">
		<div class="project-grid">
			<div class="project-card">
				<h2>Installing Ubuntu Server on the microSD</h2>
				<p>I initially wanted to use my notebook running Kali Linux to flash the ISO image onto the SD card, but as often happens, that operating system didn’t allow me to do so.
				So, using my second notebook with <b>Windows</b>, I simply used the <b>Raspberry Pi Imager software</b>. After inserting the SD card, the download and installation process was very straightforward—no explanations needed.
				<i>(In fact, you can preconfigure settings such as network credentials (Wi-Fi SSID and password), username and password, hostname, and SSH access. This makes it easier to work later and helps skip several manual setup steps — highly recommended.)</i></p>			
			</div>		  
			<div class="project-card">
				<h2>Initial Setup on Raspberry Pi 5 Server</h2>
				<p>I configured everything using the included HDMI cable connected to my small monitor, along with a USB keyboard.</p>
				<ul>
					<li><b>System update</b> <i>(sudo apt update , sudo apt upgrade -y , sudo reboot)</i></li>
					<li><b>Create a new user with sudo privileges</b> <i>(sudo adduser username , sudo usermod -aG sudo username)</i></li>
					<li><b>Install useful tools</b> <i>(for example: sudo apt install htop net-tools curl wget git ufw -y)</i></li>
					<li><b>If the Raspberry Pi needs to be accessible over the network</b> <i>(sudo ufw allow ssh , sudo ufw enable , sudo ufw status)</i></li>
					<li><b>Disable root login via SSH</b> <i><ol>
						<li>Edit the SSH configuration file: sudo nano /etc/ssh/sshd_config</li>
						<li>Find the line: #PermitRootLogin prohibit-password, </li>
						<li>Replace it with: PermitRootLogin no </li>
						<li>Then restart the SSH service: sudo systemctl restart ssh</li></i></ol>
					</li>
					<li><b>Set the keyboard layout to Italian</b> <i>(sudo dpkg-reconfigure keyboard-configuration , sudo systemctl restart keyboard-setup)</i></li>
				</ul>
			</div>
		</div>
		<div class="project-grid">
			<div class="project-card">
				<h2>Configuring a Printer on a Linux Server</h2>
				<ul>
					<li><b>Installing CUPS (Printing System) and HP drivers</b> <i>(<code>sudo apt install cups hplip</code>)</i></li>
					<li><b>Start and enable CUPS</b> <i>(<code>sudo systemctl enable cups , sudo systemctl start cups ,sudo systemctl status cups</code>)</i></li>
					<li><b>Configure the CUPS web interface</b> <i>
						<ol><li><code>sudo nano /etc/cups/cupsd.conf</code>
								<ul><li>Browsing On</li>
								<li>BrowseLocalProtocols dnssd</li>
								<li>DefaultShared yes</li>
								<li>Make sure the sections [Location] and [Location /admin] contain: Allow @LOCAL</li></ul></li>
							<li>Restart CUPS: <code>sudo systemctl restart cups</code></li>
							<li>To access the web interface, visit: http://[ServerIP]:631 (e.g., http://192.168.178.61:631)</li>
						</ol></i>
					<li><b>Finding devices (printers) on your network:</b> <i>
						<ul><li>Discover the IP address and subnet:<code> ip addr </code>(e.g., 192.168.178.41/24 brd 192.168.178.255)</li>								
						<li>Network scan with nmap: <code>sudo nmap -sS -p 631 --open -T4 --max-retries 2 --host-timeout 15s -n 192.168.178.0/24</code></li>
						<li>Identifying printer by the open port 631/tcp (e.g., 192.168.178.28)</li>
						</ul></i></li>
					<li><b>Adding the Printer:</b> <i> <code>lpadmin -p HP_Envy_6000_Series -E -v socket://[PRINTER_IP] -m everywhere [/PRINTER_IP]</code></i> <br>Where:<br>
						<ul>
							<li>-p PRINTER_NAME</li>
							<li>-E enables the printer</li>
							<li>-v socket://PRINTER_IP specifies the printer's address</li>
							<li>-m everywhere uses the generic driver</li>
						</ul></li>					
				</ul>
				<h3>Troubleshooting Errors:</h3>
				<ul>
					<li>lpadmin: Forbidden  <i>(The correct privileges are missing. <b>Solution:</b> use <b>sudo</b>.)</i></li>
					<li>lpadmin: IPP Everywhere driver requires an IPP connection <br>The provided address is not a valid IPP connection (IPP stands for Internet Printing Protocol). <br>
					<i><b>To fix this, find the correct IPP URL for your printer:</b></i>
					<ul>
						<li><code>sudo lpinfo -v | grep ipp </code><br>This will return something like: <br>
							<code>network ipp </code><br>
							<code>network ipps://HP%20ENVY%206000%20series%20%5B781383%5D._ipps._tcp.local/</code>
						</li>
						<li><b>Then add the printer via terminal with the correct IPP URL:</b><br><code>sudo lpadmin -p HP_Envy_6000_Series -E -v ipps://HP%20ENVY%206000%20series%20%5B781383%5D._ipps._tcp.local/ -m everywhere </code></li>
						<li><b>To verify the printer was added</b> <br><code>lpstat -p -d </code><br> or <br><code> sudo lpinfo -v </code></li>
						<li><b>Set the default printer</b> <br><code> lpoptions -d HP_Envy_6000_Series </code></li>
					</ul></li>
					<li><b>Test print</b><br><code>lpstat -p -d</code><br><code>lp -d HP_Envy_6000_Series /usr/share/cups/data/testprint</code></li>					
				</ul>
				<h3>Open the port in the firewall</h3>
				<p><code>sudo ufw allow 631/tcp</code></p>				
				<p><code>sudo ufw reload</code></p>
				<h3>Print from your phone without an app</h3>
				<p><b>Install Avahi:</b></p>
				<p><code>sudo apt install avahi-daemon</code><br>
				<code>sudo systemctl enable avahi-daemon</code><br>
				<code>sudo systemctl start avahi-daemon</code><br></p>
			</div>
			<div class="project-card">
				<h2>How to Send Files to the Server</h2>
				<p>Using SSH, you can copy files from your local PC to the server.</p>
				<p><code>
					scp document.pdf username@serverIP:/path
					scp -r folder/ username@serverIP:/destination/path
					</code></p>
				<p><i>Example:</i><code>scp -r ~/Documents/PortfolioProjects/Projects/LogAnalyzer utente@Dominio:/home/utente/general/ProjectFolder/LogAnalyzer</code></p>
				<p><b>Possible Errors</b><br>
				scp: realpath /general/ProjectFolder/SharedGIT/Utilities/LogAnalyzer: No such file<br>
				scp: upload "/general/ProjectFolder/SharedGIT/Utilities/LogAnalyzer": path canonicalization failed
				</p>
				<p><i>These messages indicate that the destination path on the server does not exist or is not accessible by the SSH user.</i></p>
				<p><b>How to fix it:</b></p>
				<ul><li>Check on the server whether the target directory exists and if the user has permission to access it.</li>
				<li>Use the <b>pwd</b> command on the server to find the full absolute path, then use that path in your scp command.</li>
				</ul>
			</div>
						
		</div>
	</section>
		<footer>
			&copy; PC & Network - My Portfolio 2025   |   Massimo Sedda
		</footer>		
	</body>
</html>
